# =========================================================================================
# gradle.properties - Build-wide defaults and performance knobs
# -----------------------------------------------------------------------------------------
# This file centralizes flags that affect all Gradle invocations (CLI and IDE).
# Values here are safe defaults; override per-machine with ~/.gradle/gradle.properties
# or per-run with command-line -P / -D flags.
# =========================================================================================

# -----------------------
# Core Gradle performance
# -----------------------

# Enable Gradle's configuration cache to reuse the configuration phase between runs.
# NOTE: Not all tasks/plugins are CC-compatible; Gradle will report offenders.
# Temporarily disable with: --no-configuration-cache
org.gradle.configuration-cache=true

# Allow Gradle to execute independent tasks in parallel (multi-module builds benefit).
org.gradle.parallel=true

# Enable the build cache (local by default). Improves incremental rebuild times.
org.gradle.caching=true

# -------------------------
# JVM for the Gradle daemon
# -------------------------

# JVM args used by the Gradle *daemon* (not your application/tests).
# -Xmx4g: heap cap; raise/lower for your machine/CI size
# -XX:+UseParallelGC: throughput-oriented GC; G1 is the default in recent JDKs; Parallel can be faster on big heaps
# -Dfile.encoding=UTF-8: consistent default encoding across platforms
org.gradle.jvmargs=-Xmx4g -XX:+UseParallelGC -Dfile.encoding=UTF-8

# ----------------------
# Diagnostics & warnings
# ----------------------

# Show all Gradle deprecation and plugin warnings.
# Options: all | summary | none
org.gradle.warning.mode=all

# ---------------------------------------
# Kotlin compiler defaults (project-wide)
# ---------------------------------------

# Incremental compilation reduces rebuild times (on by default in modern Kotlin).
kotlin.incremental=true

# Treat compiler warnings as errors when true.
# Can be toggled per-run: -Pkotlin.warningsAsErrors=true
kotlin.warningsAsErrors=false

# ----------------------------------------------------
# Toolchain selection (consumed by convention plugins)
# ----------------------------------------------------

# Default JDK for toolchains in the build.
# As of Detekt 1.23.8, 22 is the latest supported version.
keen.java.default=21

# ------------------------------------------------------------------
# Settings plugin versions (settings.gradle.kts -> pluginManagement)
# ------------------------------------------------------------------

# Version of the Foojay resolver used by settings to auto-provision JDKs for toolchains.
version.foojay.resolver=1.0.0

# -------------------------------------------------------
# Test conventions (consumed by keen.library test plugin)
# -------------------------------------------------------

# Print stdout/stderr from tests (off by default to keep logs tidy).
test.showStandardStreams=false

# Max parallel forks for Test tasks.
# The default is `min(available processors, 8)`; set explicitly here if needed.
test.maxParallelForks=4

# Fork a new JVM after N tests (0 = do not fork per-N).
# Useful to mitigate memory leaks in very large suites.
test.forkEvery=0

# allow dynamic agents for test forks (MockK)
test.jvmArgs=-XX:+EnableDynamicAgentLoading --add-modules=jdk.incubator.vector
